$(document).ready(function(){var e=$(".slider").glide().data("api_glide");$(window).on("keyup",function(t){13===t.keyCode&&e.jump(3,console.log("Wooo!"))}),$(".slider-arrow").on("click",function(){console.log(e.current())}),myCarousel=function(){function e(){var e=document.querySelector(".left"),t=document.querySelector(".center"),n=document.querySelector(".right");e.innerHTML=i.itemCarousel[i.countLeft++],i.countLeft===i.itemCarousel.length&&(i.countLeft=0),i.countRight++,i.countRight===i.itemCarousel.length&&(i.countRight=0),t.className="left",n.className="center",e.className="right first"}function t(){var e=i.containerCarousel.querySelector(".left"),t=i.containerCarousel.querySelector(".center"),n=i.containerCarousel.querySelector(".right");n.innerHTML=i.itemCarousel[i.countRight--],i.countRight==-1&&(i.countRight=i.itemCarousel.length-1),i.countLeft--,i.countLeft===-1&&(i.countLeft=i.itemCarousel.length-1),t.className="right",e.className="center",n.className="left first"}function n(){if(i.listCarousel.length>2){3===i.listCarousel.length?(i.countLeft=0,i.countRight=2):(i.countLeft=3,i.countRight=i.listCarousel.length-1);for(var e=i.listCarousel.length-1;e>=0;e--)i.maxHeigth<i.listCarousel[e].offsetHeight&&(i.maxHeigth=i.listCarousel[e].offsetHeight),i.itemCarousel[e]=i.listCarousel[e].innerHTML,i.listCarousel[e].remove();for(var t=2;t>=0;t--)i.containerCarousel.appendChild(i.listCarousel[t]);i.listCarousel[0].className="left",i.listCarousel[1].className="center",i.listCarousel[2].className="right",i.containerCarousel.style.height=i.maxHeigth+"px",o()}}function o(){var n=document.createElement("div"),o=document.createElement("div");n.className="btn",n.onclick=e,o.onclick=t,o.className="btn",i.pagination.className="paginator",i.pagination.appendChild(n),i.pagination.appendChild(o),i.containerCarousel.parentNode.appendChild(i.pagination)}function a(){n(),setInterval(e,5e3)}var i={containerCarousel:document.querySelector(".carousel"),listCarousel:document.querySelectorAll(".carousel li"),itemCarousel:[],countLeft:0,countRight:0,maxHeigth:0,pagination:document.createElement("div")};a()},myCarousel();var t=function(){var e=new google.maps.LatLng(51.089709,71.447923),t=new google.maps.LatLng(51.089709,71.447923),n=document.getElementById("map_canvas"),o={center:t,zoom:13,scrollwheel:!1,draggable:!0,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(n,o),i='<div id="content"><div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">thoughtbot</h1><div id="bodyContent"<p>Sveav√§gen 98</p></div></div>',l=new google.maps.InfoWindow({content:i,maxWidth:300}),r=new google.maps.Marker({position:e,map:a,title:"thoughtbot (Sweden)"});return{init:function(){a.set("styles",[{featureType:"landscape",elementType:"geometry",stylers:[{hue:"#ffff00"},{saturation:30},{lightness:10}]}]),google.maps.event.addListener(r,"click",function(){l.open(a,r)})}}}();t.init()});
!function(t,a,n,r){function e(r,e){var o=this;return o.options=t.extend({},i,e),o.parent=r,o.wrapper=o.parent.children(),o.slides=o.wrapper.children(),o.currentSlide=0,o.CSS3support=!0,o.options.beforeInit.call(o),o.init(),o.build(),o.play(),o.options.touchDistance&&o.swipe(),o.options.keyboard&&t(n).on("keyup",function(t){39===t.keyCode&&o.slide(1),37===t.keyCode&&o.slide(-1)}),o.options.hoverpause&&o.parent.add(o.arrows).add(o.nav).on("mouseover mouseout",function(t){o.pause(),"mouseout"===t.type&&o.play()}),t(a).on("resize",function(){o.init(),o.slide(0)}),o.options.afterInit.call(o),{current:function(){return-o.currentSlide+1},play:function(){o.play()},pause:function(){o.pause()},next:function(t){o.slide(1,!1,t)},prev:function(t){o.slide(-1,!1,t)},jump:function(t,a){o.slide(t-1,!0,a)},nav:function(t){o.navWrapper&&o.navWrapper.remove(),o.options.nav=t?t:o.options.nav,o.navigation()},arrows:function(t){o.arrowsWrapper&&o.arrowsWrapper.remove(),o.options.arrows=t?t:o.options.arrows,o.arrows()}}}function o(t){var e=!1,o="Khtml ms O Moz Webkit".split(" "),s=n.createElement("div"),i=null;if(t=t.toLowerCase(),s.style[t]!==r&&(e=!0),e===!1){i=t.charAt(0).toUpperCase()+t.substr(1);for(var p=0;p<o.length;p++)if(s.style[o[p]+i]!==r){e=!0;break}}return a.opera&&a.opera.version()<13&&(e=!1),e}var s="glide",i={autoplay:!1,hoverpause:!0,animationTime:500,arrows:!0,arrowsWrapperClass:"slider-arrows",arrowMainClass:"slider-arrow",arrowRightClass:"slider-arrow--right",arrowRightText:"",arrowLeftClass:"slider-arrow--left",arrowLeftText:"",nav:!0,navCenter:!0,navClass:"slider-nav",navItemClass:"slider-nav__item",navCurrentItemClass:"slider-nav__item--current",keyboard:!0,touchDistance:60,beforeInit:function(){},afterInit:function(){},beforeTransition:function(){},afterTransition:function(){}};e.prototype.build=function(){var t=this;t.options.arrows&&t.arrows(),t.options.nav&&t.navigation()},e.prototype.navigation=function(){var a=this;if(a.slides.length>1){var n=a.options,r=a.options.nav===!0?a.parent:a.options.nav;a.navWrapper=t("<div />",{"class":n.navClass}).appendTo(r);for(var e,o=a.navWrapper,s=0;s<a.slides.length;s++)e=t("<a />",{href:"#","class":n.navItemClass,"data-distance":s}).appendTo(o),o[s+1]=e;var i=o.children();i.eq(0).addClass(n.navCurrentItemClass),n.navCenter&&o.css({left:"50%",width:i.outerWidth(!0)*i.length,"margin-left":"-60px"}),i.on("click touchstart",function(n){n.preventDefault(),a.slide(t(this).data("distance"),!0)})}},e.prototype.arrows=function(){var a=this;if(a.slides.length>1){var n=a.options,r=a.options.arrows===!0?a.parent:a.options.arrows;a.arrowsWrapper=t("<div />",{"class":n.arrowsWrapperClass}).appendTo(r);var e=a.arrowsWrapper;e.right=t("<a />",{href:"#","class":n.arrowMainClass+" "+n.arrowRightClass,"data-distance":"1",html:n.arrowRightText}).appendTo(e),e.left=t("<a />",{href:"#","class":n.arrowMainClass+" "+n.arrowLeftClass,"data-distance":"-1",html:n.arrowLeftText}).appendTo(e),e.children().on("click touchstart",function(n){n.preventDefault(),a.slide(t(this).data("distance"),!1)})}},e.prototype.slide=function(t,a,n){var r=this;r.pause(),r.options.beforeTransition.call(r);var e=a?0:r.currentSlide,o=-(r.slides.length-1),s=r.options.navCurrentItemClass,i=r.slides.spread;0===e&&t===-1?e=o:e===o&&1===t?e=0:e+=-t;var p=i*e+"px";r.CSS3support?r.wrapper.css({"-webkit-transform":"translate3d("+p+", 0px, 0px)","-moz-transform":"translate3d("+p+", 0px, 0px)","-ms-transform":"translate3d("+p+", 0px, 0px)","-o-transform":"translate3d("+p+", 0px, 0px)",transform:"translate3d("+p+", 0px, 0px)"}):r.wrapper.stop().animate({"margin-left":p},r.options.animationTime),r.options.nav&&r.navWrapper&&r.navWrapper.children().eq(-e).addClass(s).siblings().removeClass(s),r.currentSlide=e,r.options.afterTransition.call(r),"undefined"!==n&&"function"==typeof n&&n(),r.play()},e.prototype.play=function(){var t=this;t.options.autoplay&&(t.auto=setInterval(function(){t.slide(1,!1)},t.options.autoplay))},e.prototype.pause=function(){var t=this;t.options.autoplay&&(t.auto=clearInterval(t.auto))},e.prototype.swipe=function(){var t,a,n,r,e,o,s,i,p,l,u,d,c,f=this,h=180/Math.PI;f.parent.on("touchstart",function(a){t=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],n=t.pageX,r=t.pageY}),f.parent.on("touchmove",function(a){t=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],e=t.pageX,o=t.pageY,l=e-n,u=o-r,d=Math.abs(l<<2),c=Math.abs(u<<2),s=Math.sqrt(d+c),i=Math.sqrt(c),p=Math.asin(i/s),p*h<32&&a.preventDefault()}),f.parent.on("touchend",function(r){t=r.originalEvent.touches[0]||r.originalEvent.changedTouches[0],a=t.pageX-n,a>f.options.touchDistance?f.slide(-1):a<-f.options.touchDistance&&f.slide(1)})},e.prototype.init=function(){var t=this,a=t.parent.width();t.slides.spread=a,t.wrapper.width(a*t.slides.length),t.slides.width(t.slides.spread),o("transition")&&o("transform")||(t.CSS3support=!1)},t.fn[s]=function(a){return this.each(function(){t.data(this,"api_"+s)||t.data(this,"api_"+s,new e(t(this),a))})}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyIsImpxdWVyeS5nbGlkZS5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImdsaWRlIiwiZGF0YSIsIndpbmRvdyIsIm9uIiwia2V5Iiwia2V5Q29kZSIsImp1bXAiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudCIsIm15Q2Fyb3VzZWwiLCJtb3ZlTGVmdCIsImxlZnQiLCJxdWVyeVNlbGVjdG9yIiwiY2VudGVyIiwicmlnaHQiLCJpbm5lckhUTUwiLCJjYXJvdXNlbCIsIml0ZW1DYXJvdXNlbCIsImNvdW50TGVmdCIsImxlbmd0aCIsImNvdW50UmlnaHQiLCJjbGFzc05hbWUiLCJtb3ZlUmlnaHQiLCJjb250YWluZXJDYXJvdXNlbCIsImJ1aWxkQ2Fyb3VzZWwiLCJsaXN0Q2Fyb3VzZWwiLCJpIiwibWF4SGVpZ3RoIiwib2Zmc2V0SGVpZ2h0IiwicmVtb3ZlIiwiaiIsImFwcGVuZENoaWxkIiwic3R5bGUiLCJoZWlnaHQiLCJhZGRQYWdpbmF0b3IiLCJidG5MZWZ0IiwiY3JlYXRlRWxlbWVudCIsImJ0blJpZ2h0Iiwib25jbGljayIsInBhZ2luYXRpb24iLCJwYXJlbnROb2RlIiwic3RhcnQiLCJzZXRJbnRlcnZhbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiaXR0ZXJzTWFwIiwibXlMYXRsbmciLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwibWFwQ2VudGVyIiwibWFwQ2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJtYXBPcHRpb25zIiwiem9vbSIsInNjcm9sbHdoZWVsIiwiZHJhZ2dhYmxlIiwiZGlzYWJsZURlZmF1bHRVSSIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJtYXAiLCJNYXAiLCJjb250ZW50U3RyaW5nIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJjb250ZW50IiwibWF4V2lkdGgiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwiaW5pdCIsInNldCIsImZlYXR1cmVUeXBlIiwiZWxlbWVudFR5cGUiLCJzdHlsZXJzIiwiaHVlIiwic2F0dXJhdGlvbiIsImxpZ2h0bmVzcyIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJvcGVuIiwidW5kZWZpbmVkIiwiR2xpZGUiLCJwYXJlbnQiLCJvcHRpb25zIiwiXyIsInRoaXMiLCJleHRlbmQiLCJkZWZhdWx0cyIsIndyYXBwZXIiLCJjaGlsZHJlbiIsInNsaWRlcyIsImN1cnJlbnRTbGlkZSIsIkNTUzNzdXBwb3J0IiwiYmVmb3JlSW5pdCIsImNhbGwiLCJidWlsZCIsInBsYXkiLCJ0b3VjaERpc3RhbmNlIiwic3dpcGUiLCJrZXlib2FyZCIsImsiLCJzbGlkZSIsImhvdmVycGF1c2UiLCJhZGQiLCJhcnJvd3MiLCJuYXYiLCJlIiwicGF1c2UiLCJ0eXBlIiwiYWZ0ZXJJbml0IiwibmV4dCIsImNhbGxiYWNrIiwicHJldiIsImRpc3RhbmNlIiwidGFyZ2V0IiwibmF2V3JhcHBlciIsIm5hdmlnYXRpb24iLCJhcnJvd3NXcmFwcGVyIiwiaXNDc3NTdXBwb3J0ZWQiLCJkZWNsYXJhdGlvbiIsImlzU3VwcG9ydGVkIiwicHJlZml4ZXMiLCJzcGxpdCIsImNsb25lIiwiZGVjbGFyYXRpb25DYXBpdGFsIiwidG9Mb3dlckNhc2UiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0ciIsIm9wZXJhIiwidmVyc2lvbiIsIm5hbWUiLCJhdXRvcGxheSIsImFuaW1hdGlvblRpbWUiLCJhcnJvd3NXcmFwcGVyQ2xhc3MiLCJhcnJvd01haW5DbGFzcyIsImFycm93UmlnaHRDbGFzcyIsImFycm93UmlnaHRUZXh0IiwiYXJyb3dMZWZ0Q2xhc3MiLCJhcnJvd0xlZnRUZXh0IiwibmF2Q2VudGVyIiwibmF2Q2xhc3MiLCJuYXZJdGVtQ2xhc3MiLCJuYXZDdXJyZW50SXRlbUNsYXNzIiwiYmVmb3JlVHJhbnNpdGlvbiIsImFmdGVyVHJhbnNpdGlvbiIsInByb3RvdHlwZSIsIm8iLCJjbGFzcyIsImFwcGVuZFRvIiwiaXRlbSIsImhyZWYiLCJkYXRhLWRpc3RhbmNlIiwibmF2Q2hpbGRyZW4iLCJlcSIsImFkZENsYXNzIiwiY3NzIiwid2lkdGgiLCJvdXRlcldpZHRoIiwibWFyZ2luLWxlZnQiLCJwcmV2ZW50RGVmYXVsdCIsImh0bWwiLCJzbGlkZXNMZW5ndGgiLCJuYXZDdXJyZW50Q2xhc3MiLCJzbGlkZXNTcHJlYWQiLCJzcHJlYWQiLCJ0cmFuc2xhdGUiLCItd2Via2l0LXRyYW5zZm9ybSIsIi1tb3otdHJhbnNmb3JtIiwiLW1zLXRyYW5zZm9ybSIsIi1vLXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInN0b3AiLCJhbmltYXRlIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImF1dG8iLCJjbGVhckludGVydmFsIiwidG91Y2giLCJ0b3VjaFN0YXJ0WCIsInRvdWNoU3RhcnRZIiwidG91Y2hFbmRYIiwidG91Y2hFbmRZIiwidG91Y2hIeXBvdGVudXNlIiwidG91Y2hDYXRoZXR1cyIsInRvdWNoU2luIiwic3ViRXhTeCIsInN1YkV5U3kiLCJwb3dFWCIsInBvd0VZIiwiTWF0aFBJIiwiTWF0aCIsIlBJIiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJhYnMiLCJzcXJ0IiwiYXNpbiIsInNsaWRlcldpZHRoIiwiZm4iLCJlYWNoIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUNoQixHQUFJQyxHQUFRSCxFQUFFLFdBQVdHLFFBQVFDLEtBQUssWUFDdkNKLEdBQUVLLFFBQVFDLEdBQUcsUUFBUyxTQUFVQyxHQUNaLEtBQWhCQSxFQUFJQyxTQUNSTCxFQUFNTSxLQUFLLEVBQUdDLFFBQVFDLElBQUksWUFHMUJYLEVBQUUsaUJBQWlCTSxHQUFHLFFBQVMsV0FDL0JJLFFBQVFDLElBQUlSLEVBQU1TLGFBRVhDLFdBQWEsV0FXYixRQUFTQyxLQUNMLEdBQUlDLEdBQU9kLFNBQVNlLGNBQWMsU0FDOUJDLEVBQVNoQixTQUFTZSxjQUFjLFdBQ2hDRSxF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RUQsUUFBUWMsY0FFOUJiLEVBQUVpQixVQUVTSixHQUFpQmIsRUFBRUQsUUFBUWMsZUFFdENiLEVBQUVpQixNQUFNLE1BV1hwQixFQUFNaUUsVUFBVTdFLEtBQU8sV0FHdEIsR0FBSWUsR0FBSUMsS0FFUG9ILEVBQWNySCxFQUFFRixPQUFPMkUsT0FFdkJ6RSxHQUFFTSxPQUFPMkUsT0FBU29DLEVBR2xCckgsRUFBRUksUUFBUXFFLE1BQU00QyxFQUFjckgsRUFBRU0sT0FBT3pFLFFBRXZDbUUsRUFBRU0sT0FBT21FLE1BQU16RSxFQUFFTSxPQUFPMkUsUUFHbkIvQyxFQUFlLGVBQWtCQSxFQUFlLGVBQWVsQyxFQUFFUSxhQUFjLElBcUN0RmxHLEVBQUVnTixHQUFHdkUsR0FBUSxTQUFTaEQsR0FFckIsTUFBT0UsTUFBS3NILEtBQUssV0FDVmpOLEVBQUVJLEtBQUt1RixLQUFNLE9BQVM4QyxJQUMzQnpJLEVBQUVJLEtBQUt1RixLQUFNLE9BQVM4QyxFQUNyQixHQUFJbEQsR0FBTXZGLEVBQUUyRixNQUFPRixRQU9yQnlILE9BQVE3TSxPQUFRSiIsImZpbGUiOiJwcm9kdWN0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgdmFyIGdsaWRlID0gJCgnLnNsaWRlcicpLmdsaWRlKCkuZGF0YSgnYXBpX2dsaWRlJyk7XHJcblx0JCh3aW5kb3cpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChrZXkpIHtcclxuXHRpZiAoa2V5LmtleUNvZGUgPT09IDEzKSB7XHJcblx0Z2xpZGUuanVtcCgzLCBjb25zb2xlLmxvZygnV29vbyEnKSk7XHJcblx0fTtcclxuXHR9KTtcclxuXHQkKCcuc2xpZGVyLWFycm93Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0Y29uc29sZS5sb2coZ2xpZGUuY3VycmVudCgpKTtcclxuXHR9KTtcclxuICAgICAgICBteUNhcm91c2VsID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY2Fyb3VzZWwgPSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckNhcm91c2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwnKSxcclxuICAgICAgICAgICAgbGlzdENhcm91c2VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWwgbGknKSxcclxuICAgICAgICAgICAgaXRlbUNhcm91c2VsOiBbXSxcclxuICAgICAgICAgICAgY291bnRMZWZ0OiAwLFxyXG4gICAgICAgICAgICBjb3VudFJpZ2h0OiAwLFxyXG4gICAgICAgICAgICBtYXhIZWlndGg6IDAsXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBtb3ZlTGVmdCgpIHtcclxuICAgICAgICAgICAgdmFyIGxlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVmdCcpO1xyXG4gICAgICAgICAgICB2YXIgY2VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNlbnRlcicpO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHQnKTtcclxuXHJcbiAgICAgICAgICAgIGxlZnQuaW5uZXJIVE1MID0gY2Fyb3VzZWwuaXRlbUNhcm91c2VsW2Nhcm91c2VsLmNvdW50TGVmdCsrXTtcclxuICAgICAgICAgICAgaWYgKGNhcm91c2VsLmNvdW50TGVmdCA9PT0gY2Fyb3VzZWwuaXRlbUNhcm91c2VsLmxlbmd0aCkgY2Fyb3VzZWwuY291bnRMZWZ0ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNhcm91c2VsLmNvdW50UmlnaHQrKztcclxuICAgICAgICAgICAgaWYgKGNhcm91c2VsLmNvdW50UmlnaHQgPT09IGNhcm91c2VsLml0ZW1DYXJvdXNlbC5sZW5ndGgpIGNhcm91c2VsLmNvdW50UmlnaHQgPSAwO1xyXG5cclxuICAgICAgICAgICAgY2VudGVyLmNsYXNzTmFtZSA9ICdsZWZ0JztcclxuICAgICAgICAgICAgcmlnaHQuY2xhc3NOYW1lID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGxlZnQuY2xhc3NOYW1lID0gJ3JpZ2h0IGZpcnN0JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1vdmVSaWdodCgpIHtcclxuICAgICAgICAgICAgdmFyIGxlZnQgPSBjYXJvdXNlbC5jb250YWluZXJDYXJvdXNlbC5xdWVyeVNlbGVjdG9yKCcubGVmdCcpO1xyXG4gICAgICAgICAgICB2YXIgY2VudGVyID0gY2Fyb3VzZWwuY29udGFpbmVyQ2Fyb3VzZWwucXVlcnlTZWxlY3RvcignLmNlbnRlcicpO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBjYXJvdXNlbC5jb250YWluZXJDYXJvdXNlbC5xdWVyeVNlbGVjdG9yKCcucmlnaHQnKTtcclxuXHJcbiAgICAgICAgICAgIHJpZ2h0LmlubmVySFRNTCA9IGNhcm91c2VsLml0ZW1DYXJvdXNlbFtjYXJvdXNlbC5jb3VudFJpZ2h0LS1dO1xyXG4gICAgICAgICAgICBpZiAoY2Fyb3VzZWwuY291bnRSaWdodCA9PSAtMSkgY2Fyb3VzZWwuY291bnRSaWdodCA9IGNhcm91c2VsLml0ZW1DYXJvdXNlbC5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgY2Fyb3VzZWwuY291bnRMZWZ0LS07XHJcbiAgICAgICAgICAgIGlmIChjYXJvdXNlbC5jb3VudExlZnQgPT09IC0xKSBjYXJvdXNlbC5jb3VudExlZnQgPSBjYXJvdXNlbC5pdGVtQ2Fyb3VzZWwubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgIGNlbnRlci5jbGFzc05hbWUgPSAncmlnaHQnO1xyXG4gICAgICAgICAgICBsZWZ0LmNsYXNzTmFtZSA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICByaWdodC5jbGFzc05hbWUgPSAnbGVmdCBmaXJzdCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidWlsZENhcm91c2VsKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGNhcm91c2VsLmxpc3RDYXJvdXNlbC5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2Fyb3VzZWwubGlzdENhcm91c2VsLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLmNvdW50TGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWwuY291bnRSaWdodCA9IDI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLmNvdW50TGVmdCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWwuY291bnRSaWdodCA9IGNhcm91c2VsLmxpc3RDYXJvdXNlbC5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjYXJvdXNlbC5saXN0Q2Fyb3VzZWwubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2Fyb3VzZWwubWF4SGVpZ3RoIDwgY2Fyb3VzZWwubGlzdENhcm91c2VsW2ldLm9mZnNldEhlaWdodCkgY2Fyb3VzZWwubWF4SGVpZ3RoID0gY2Fyb3VzZWwubGlzdENhcm91c2VsW2ldLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbC5pdGVtQ2Fyb3VzZWxbaV0gPSBjYXJvdXNlbC5saXN0Q2Fyb3VzZWxbaV0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLmxpc3RDYXJvdXNlbFtpXS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA+PSAwOyBqLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbC5jb250YWluZXJDYXJvdXNlbC5hcHBlbmRDaGlsZChjYXJvdXNlbC5saXN0Q2Fyb3VzZWxbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2Fyb3VzZWwubGlzdENhcm91c2VsWzBdLmNsYXNzTmFtZSA9ICdsZWZ0JztcclxuICAgICAgICAgICAgICAgIGNhcm91c2VsLmxpc3RDYXJvdXNlbFsxXS5jbGFzc05hbWUgPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgIGNhcm91c2VsLmxpc3RDYXJvdXNlbFsyXS5jbGFzc05hbWUgPSAncmlnaHQnO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhcm91c2VsLmNvbnRhaW5lckNhcm91c2VsLnN0eWxlLmhlaWdodCA9IGNhcm91c2VsLm1heEhlaWd0aCArICdweCc7XHJcblxyXG4gICAgICAgICAgICAgICAgYWRkUGFnaW5hdG9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFBhZ2luYXRvcigpIHtcclxuICAgICAgICAgICAgdmFyIGJ0bkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgICAgIGJ0blJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBidG5MZWZ0LmNsYXNzTmFtZSA9ICdidG4nO1xyXG4gICAgICAgICAgICBidG5MZWZ0Lm9uY2xpY2sgPSBtb3ZlTGVmdDtcclxuXHJcbiAgICAgICAgICAgIGJ0blJpZ2h0Lm9uY2xpY2sgPSBtb3ZlUmlnaHQ7XHJcbiAgICAgICAgICAgIGJ0blJpZ2h0LmNsYXNzTmFtZSA9ICdidG4nO1xyXG5cclxuICAgICAgICAgICAgY2Fyb3VzZWwucGFnaW5hdGlvbi5jbGFzc05hbWUgPSAncGFnaW5hdG9yJztcclxuICAgICAgICAgICAgY2Fyb3VzZWwucGFnaW5hdGlvbi5hcHBlbmRDaGlsZChidG5MZWZ0KTtcclxuICAgICAgICAgICAgY2Fyb3VzZWwucGFnaW5hdGlvbi5hcHBlbmRDaGlsZChidG5SaWdodCk7XHJcblxyXG4gICAgICAgICAgICBjYXJvdXNlbC5jb250YWluZXJDYXJvdXNlbC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGNhcm91c2VsLnBhZ2luYXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICAgICAgICAgIGJ1aWxkQ2Fyb3VzZWwoKTtcclxuICAgICAgICAgICAgc2V0SW50ZXJ2YWwobW92ZUxlZnQsIDUwMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBteUNhcm91c2VsKCk7XHJcbiAgICB2YXIgYml0dGVyc01hcCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbXlMYXRsbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDUxLjA4OTcwOSwgNzEuNDQ3OTIzKSxcclxuICAgIG1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNTEuMDg5NzA5LCA3MS40NDc5MjMpLFxyXG4gICAgbWFwQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcF9jYW52YXMnKSxcclxuICAgIG1hcE9wdGlvbnMgPSB7XHJcbiAgICBjZW50ZXI6IG1hcENlbnRlcixcclxuICAgIHpvb206IDEzLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxyXG4gICAgZHJhZ2dhYmxlOiB0cnVlLFxyXG4gICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcclxuICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVBcclxuICAgIH0sXHJcbiAgICBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKG1hcENhbnZhcywgbWFwT3B0aW9ucyksXHJcbiAgICBjb250ZW50U3RyaW5nID1cclxuICAgICc8ZGl2IGlkPVwiY29udGVudFwiPicrXHJcbiAgICAnPGRpdiBpZD1cInNpdGVOb3RpY2VcIj4nK1xyXG4gICAgJzwvZGl2PicrXHJcbiAgICAnPGgxIGlkPVwiZmlyc3RIZWFkaW5nXCIgY2xhc3M9XCJmaXJzdEhlYWRpbmdcIj50aG91Z2h0Ym90PC9oMT4nK1xyXG4gICAgJzxkaXYgaWQ9XCJib2R5Q29udGVudFwiJytcclxuICAgICc8cD5TdmVhdsOkZ2VuIDk4PC9wPicrXHJcbiAgICAnPC9kaXY+JytcclxuICAgICc8L2Rpdj4nLFxyXG4gICAgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHtcclxuICAgIGNvbnRlbnQ6IGNvbnRlbnRTdHJpbmcsXHJcbiAgICBtYXhXaWR0aDogMzAwXHJcbiAgICB9KSxcclxuICAgIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgcG9zaXRpb246IG15TGF0bG5nLFxyXG4gICAgbWFwOiBtYXAsXHJcbiAgICB0aXRsZTogJ3Rob3VnaHRib3QgKFN3ZWRlbiknXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBtYXAuc2V0KCdzdHlsZXMnLCBbe1xyXG4gICAgZmVhdHVyZVR5cGU6ICdsYW5kc2NhcGUnLFxyXG4gICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeScsXHJcbiAgICBzdHlsZXJzOiBbXHJcbiAgICB7IGh1ZTogJyNmZmZmMDAnIH0sXHJcbiAgICB7IHNhdHVyYXRpb246IDMwIH0sXHJcbiAgICB7IGxpZ2h0bmVzczogMTB9XHJcbiAgICBdfVxyXG4gICAgXSk7XHJcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGluZm93aW5kb3cub3BlbihtYXAsbWFya2VyKTtcclxuICAgIH0pO1xyXG4gICAgfVxyXG4gICAgfTtcclxuICAgIH0oKSk7XHJcbiAgICBiaXR0ZXJzTWFwLmluaXQoKTtcclxufSlcclxuIiwiLypcclxuICogR2xpZGUuanNcclxuICogVmVyOiAxLjAuNVxyXG4gKiBTaW1wbGUsIGxpZ2h0d2VpZ2h0IGFuZCBmYXN0IGpRdWVyeSBzbGlkZXJcclxuICogdXJsOiBodHRwOi8vamVkcnplamNoYWx1YmVrLmNvbS9nbGlkZVxyXG4gKiBBdXRvcjogQEplZHJ6ZWpDaGFsdWJla1xyXG4gKiBzaXRlOiBodHRwOi8vamVkcnplamNoYWx1YmVrLmNvbVxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcclxuICovXHJcbjsoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHR2YXIgbmFtZSA9ICdnbGlkZScsXHJcblx0XHRkZWZhdWx0cyA9IHtcclxuXHJcblx0XHRcdC8vIHtJbnQgb3IgQm9vbH0gRmFsc2UgZm9yIHR1cm5pbmcgb2ZmIGF1dG9wbGF5XHJcblx0XHRcdGF1dG9wbGF5OiBmYWxzZSxcclxuXHRcdFx0Ly8ge0Jvb2x9IFBhdXNlIGF1dG9wbGF5IG9uIG1vdXNlb3ZlciBzbGlkZXJcclxuXHRcdFx0aG92ZXJwYXVzZTogdHJ1ZSxcclxuXHJcblx0XHRcdC8qKlxyXG5cdFx0XHQgKiBBbmltYXRpb24gdGltZVxyXG5cdFx0XHQgKiAhISEgSU1QT1JUQU5UICEhIVxyXG5cdFx0XHQgKiBUaGF0IG9wdGlvbiB3aWxsIGJlIHVzZSBvbmx5LCB3aGVuIGNzczMgYXJlIG5vdCBzdXBvcnRlZFxyXG5cdFx0XHQgKiBJZiBjc3MzIGFyZSBzdXBwb3J0ZWQgYW5pbWF0aW9uIHRpbWUgaXMgc2V0IGluIGNzcyBkZWNsYXJhdGlvbiBpbnNpZGUgLmNzcyBmaWxlXHJcblx0XHRcdCAqIEB0eXBlIHtJbnR9XHJcblx0XHRcdCAqL1xyXG5cdFx0XHRhbmltYXRpb25UaW1lOiA1MDAsXHJcblxyXG5cdFx0XHQvKipcclxuXHRcdFx0ICoge0Jvb2wgb3IgU3RyaW5nfSBTaG93L2hpZGUvYXBwZW5kVG8gYXJyb3dzXHJcblx0XHRcdCAqIFRydWUgZm9yIGFwcGVuZCBhcnJvd3MgdG8gc2xpZGVyIHdyYXBwZXJcclxuXHRcdFx0ICogRmFsc2UgZm9yIG5vdCBhcHBlbmRpbmcgYXJyb3dzXHJcblx0XHRcdCAqIElkIG9yIGNsYXNzIG5hbWUgKGUuZy4gJy5jbGFzcy1uYW1lJykgZm9yIGFwcGVuZGluZyB0byBzcGVjaWZpYyBIVE1MIG1hcmt1cFxyXG5cdFx0XHQgKi9cclxuXHRcdFx0YXJyb3dzOiB0cnVlLFxyXG5cdFx0XHQvLyB7U3RyaW5nfSBBcnJvd3Mgd3JhcHBlciBjbGFzc1xyXG5cdFx0XHRhcnJvd3NXcmFwcGVyQ2xhc3M6ICdzbGlkZXItYXJyb3dzJyxcclxuXHRcdFx0Ly8ge1N0cmluZ30gTWFpbiBjbGFzcyBmb3IgYm90aCBhcnJvd3NcclxuXHRcdFx0YXJyb3dNYWluQ2xhc3M6ICdzbGlkZXItYXJyb3cnLFxyXG5cdFx0XHQvLyB7U3RyaW5nfSBSaWdodCBhcnJvd1xyXG5cdFx0XHRhcnJvd1JpZ2h0Q2xhc3M6ICdzbGlkZXItYXJyb3ctLXJpZ2h0JyxcclxuXHRcdFx0Ly8ge1N0cmluZ30gUmlnaHQgYXJyb3cgdGV4dFxyXG5cdFx0XHRhcnJvd1JpZ2h0VGV4dDogJycsXHJcblx0XHRcdC8vIHtTdHJpbmd9IExlZnQgYXJyb3dcclxuXHRcdFx0YXJyb3dMZWZ0Q2xhc3M6ICdzbGlkZXItYXJyb3ctLWxlZnQnLFxyXG5cdFx0XHQvLyB7U3RyaW5nfSBMZWZ0IGFycm93IHRleHRcclxuXHRcdFx0YXJyb3dMZWZ0VGV4dDogJycsXHJcblxyXG5cdFx0XHQvKipcclxuXHRcdFx0ICoge0Jvb2wgb3IgU3RyaW5nfSBTaG93L2hpZGUvYXBwZW5kVG8gYnVsbGV0cyBuYXZpZ2F0aW9uXHJcblx0XHRcdCAqIFRydWUgZm9yIGFwcGVuZCBhcnJvd3MgdG8gc2xpZGVyIHdyYXBwZXJcclxuXHRcdFx0ICogRmFsc2UgZm9yIG5vdCBhcHBlbmRpbmcgYXJyb3dzXHJcblx0XHRcdCAqIElkIG9yIGNsYXNzIG5hbWUgKGUuZy4gJy5jbGFzcy1uYW1lJykgZm9yIGFwcGVuZGluZyB0byBzcGVjaWZpYyBIVE1MIG1hcmt1cFxyXG5cdFx0XHQgKi9cclxuXHRcdFx0bmF2OiB0cnVlLFxyXG5cdFx0XHQvLyB7Qm9vbH0gQ2VudGVyIGJ1bGxldCBuYXZpZ2F0aW9uXHJcblx0XHRcdG5hdkNlbnRlcjogdHJ1ZSxcclxuXHRcdFx0Ly8ge1N0cmluZ30gTmF2aWdhdGlvbiBjbGFzc1xyXG5cdFx0XHRuYXZDbGFzczogJ3NsaWRlci1uYXYnLFxyXG5cdFx0XHQvLyB7U3RyaW5nfSBOYXZpZ2F0aW9uIGl0ZW0gY2xhc3NcclxuXHRcdFx0bmF2SXRlbUNsYXNzOiAnc2xpZGVyLW5hdl9faXRlbScsXHJcblx0XHRcdC8vIHtTdHJpbmd9IEN1cnJlbnQgbmF2aWdhdGlvbiBpdGVtIGNsYXNzXHJcblx0XHRcdG5hdkN1cnJlbnRJdGVtQ2xhc3M6ICdzbGlkZXItbmF2X19pdGVtLS1jdXJyZW50JyxcclxuXHJcblx0XHRcdC8vIHtCb29sfSBTbGlkZSBvbiBsZWZ0L3JpZ2h0IGtleWJvYXJkIGFycm93cyBwcmVzc1xyXG5cdFx0XHRrZXlib2FyZDogdHJ1ZSxcclxuXHJcblx0XHRcdC8vIHtJbnQgb3IgQm9vbH0gVG91Y2ggc2V0dGluZ3NcclxuXHRcdFx0dG91Y2hEaXN0YW5jZTogNjAsXHJcblxyXG5cdFx0XHQvLyB7RnVuY3Rpb259IENhbGxiYWNrIGJlZm9yZSBwbHVnaW4gaW5pdFxyXG5cdFx0XHRiZWZvcmVJbml0OiBmdW5jdGlvbigpIHt9LFxyXG5cdFx0XHQvLyB7RnVuY3Rpb259IENhbGxiYWNrIGFmdGVyIHBsdWdpbiBpbml0XHJcblx0XHRcdGFmdGVySW5pdDogZnVuY3Rpb24oKSB7fSxcclxuXHJcblx0XHRcdC8vIHtGdW5jdGlvbn0gQ2FsbGJhY2sgYmVmb3JlIHNsaWRlIGNoYW5nZVxyXG5cdFx0XHRiZWZvcmVUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHt9LFxyXG5cdFx0XHQvLyB7RnVuY3Rpb259IENhbGxiYWNrIGFmdGVyIHNsaWRlIGNoYW5nZVxyXG5cdFx0XHRhZnRlclRyYW5zaXRpb246IGZ1bmN0aW9uKCkge31cclxuXHJcblx0XHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXIgQ29uc3RydWN0b3JcclxuXHQgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XHJcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBHbGlkZShwYXJlbnQsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXM7XHJcblx0XHQvLyBFeHRlbmQgb3B0aW9uc1xyXG5cdFx0Xy5vcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHRcdC8vIFNpZGViYXJcclxuXHRcdF8ucGFyZW50ID0gcGFyZW50O1xyXG5cdFx0Ly8gU2xpZGVzIFdyYXBwZXJcclxuXHRcdF8ud3JhcHBlciA9IF8ucGFyZW50LmNoaWxkcmVuKCk7XHJcblx0XHQvLyBTbGlkZXNcclxuXHRcdF8uc2xpZGVzID0gXy53cmFwcGVyLmNoaWxkcmVuKCk7XHJcblx0XHQvLyBDdXJyZW50IHNsaWRlIGlkXHJcblx0XHRfLmN1cnJlbnRTbGlkZSA9IDA7XHJcblx0XHQvLyBDU1MzIEFuaW1hdGlvbiBzdXBwb3J0XHJcblx0XHRfLkNTUzNzdXBwb3J0ID0gdHJ1ZTtcclxuXHJcblx0XHQvLyBDYWxsYmFja3MgYmVmb3JlIHBsdWdpbiBpbml0XHJcblx0XHRfLm9wdGlvbnMuYmVmb3JlSW5pdC5jYWxsKF8pO1xyXG5cclxuXHRcdC8vIEluaXRpYWxpemVcclxuXHRcdF8uaW5pdCgpO1xyXG5cdFx0Ly8gQnVpbGQgRE9NXHJcblx0XHRfLmJ1aWxkKCk7XHJcblx0XHQvLyBTdGFydCBhdXRvcGxheVxyXG5cdFx0Xy5wbGF5KCk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDb250cm9sbGVyXHJcblx0XHQgKiBUb3VjaCBldmVudHNcclxuXHRcdCAqL1xyXG5cdFx0aWYgKF8ub3B0aW9ucy50b3VjaERpc3RhbmNlKSB7XHJcblx0XHRcdC8vIEluaXQgc3dpcGVcclxuXHRcdFx0Xy5zd2lwZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ29udHJvbGxlclxyXG5cdFx0ICogS2V5Ym9hcmQgbGVmdCBhbmQgcmlnaHQgYXJyb3cga2V5c1xyXG5cdFx0ICovXHJcblx0XHRpZiAoXy5vcHRpb25zLmtleWJvYXJkKSB7XHJcblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGspIHtcclxuXHRcdFx0XHQvLyBOZXh0XHJcblx0XHRcdFx0aWYgKGsua2V5Q29kZSA9PT0gMzkpIF8uc2xpZGUoMSk7XHJcblx0XHRcdFx0Ly8gUHJldlxyXG5cdFx0XHRcdGlmIChrLmtleUNvZGUgPT09IDM3KSBfLnNsaWRlKC0xKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDb250cm9sbGVyXHJcblx0XHQgKiBNb3VzZSBvdmVyIHNsaWRlclxyXG5cdFx0ICogV2hlbiBtb3VzZSBpcyBvdmVyIHNsaWRlciwgcGF1c2UgYXV0b3BsYXlcclxuXHRcdCAqIE9uIG91dCwgc3RhcnQgYXV0b3BsYXkgYWdhaW5cclxuXHRcdCAqL1xyXG5cdFx0aWYgKF8ub3B0aW9ucy5ob3ZlcnBhdXNlKSB7XHJcblx0XHRcdF8ucGFyZW50LmFkZChfLmFycm93cykuYWRkKF8ubmF2KS5vbignbW91c2VvdmVyIG1vdXNlb3V0JywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdC8vIFBhc3VlIGF1dG9wbGF5XHJcblx0XHRcdFx0Xy5wYXVzZSgpO1xyXG5cdFx0XHRcdC8vIFdoZW4gbW91c2UgbGVmdCBzbGlkZXIgb3IgdG91Y2ggZW5kLCBzdGFydCBhdXRvcGxheSBhbmV3XHJcblx0XHRcdFx0aWYgKGUudHlwZSA9PT0gJ21vdXNlb3V0JykgXy5wbGF5KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ29udHJvbGxlclxyXG5cdFx0ICogV2hlbiByZXNpemUgYnJvd3NlciB3aW5kb3dcclxuXHRcdCAqIFBhdXNlIGF1dG9wbGF5IGluIGZlYXIgb2YgZXNjYWxhdGlvblxyXG5cdFx0ICogUmVpbml0IHBsdWdpbiBmb3IgbmV3IHNsaWRlciBkaW1lbnNpb25zXHJcblx0XHQgKiBDb3JyZWN0IGNyb3AgdG8gY3VycmVudCBzbGlkZVxyXG5cdFx0ICogU3RhcnQgYXV0b3BsYXkgZnJvbSBiZWdpbm5pbmdcclxuXHRcdCAqL1xyXG5cdFx0JCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gUmVpbml0IHBsdWdpbiAoc2V0IG5ldyBzbGlkZXIgZGltZW5zaW9ucylcclxuXHRcdFx0Xy5pbml0KCk7XHJcblx0XHRcdC8vIENyb3AgdG8gY3VycmVudCBzbGlkZVxyXG5cdFx0XHRfLnNsaWRlKDApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2FsbGJhY2sgYWZ0ZXIgcGx1Z2luIGluaXRcclxuXHRcdF8ub3B0aW9ucy5hZnRlckluaXQuY2FsbChfKTtcclxuXHJcblx0XHQvLyBSZXR1cm5pbmcgQVBJXHJcblx0XHRyZXR1cm4ge1xyXG5cclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIEdldCBjdXJyZW50IHNsaWRlIG51bWJlclxyXG5cdFx0XHQgKiBAcmV0dXJuIHtJbnR9XHJcblx0XHRcdCAqL1xyXG5cdFx0XHRjdXJyZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gLShfLmN1cnJlbnRTbGlkZSkgKyAxO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIFN0YXJ0IGF1dG9wbGF5XHJcblx0XHRcdCAqL1xyXG5cdFx0XHRwbGF5OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRfLnBsYXkoKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8qKlxyXG5cdFx0XHQgKiBTdG9wIGF1dG9wbGF5XHJcblx0XHRcdCAqL1xyXG5cdFx0XHRwYXVzZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Xy5wYXVzZSgpO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIFNsaWRlIG9uZSBmb3J3YXJkXHJcblx0XHRcdCAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xyXG5cdFx0XHQgKi9cclxuXHRcdFx0bmV4dDogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuXHRcdFx0XHRfLnNsaWRlKDEsIGZhbHNlLCBjYWxsYmFjayk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvKipcclxuXHRcdFx0ICogU2xpZGUgb25lIGJhY2t3YXJkXHJcblx0XHRcdCAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xyXG5cdFx0XHQgKi9cclxuXHRcdFx0cHJldjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuXHRcdFx0XHRfLnNsaWRlKC0xLCBmYWxzZSwgY2FsbGJhY2spO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIEp1bXAgdG8gc3BlY2lmZWQgc2xpZGVcclxuXHRcdFx0ICogQHBhcmFtICB7SW50fSAgIFx0ICBkaXN0YW5jZVxyXG5cdFx0XHQgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2tcclxuXHRcdFx0ICovXHJcblx0XHRcdGp1bXA6IGZ1bmN0aW9uKGRpc3RhbmNlLCBjYWxsYmFjaykge1xyXG5cdFx0XHRcdF8uc2xpZGUoZGlzdGFuY2UtMSwgdHJ1ZSwgY2FsbGJhY2spO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIEFwcGVuZCBuYXZpZ2F0aW9uIHRvIHNwZWNpZmV0IHRhcmdldFxyXG5cdFx0XHQgKiBAcGFyYW0gIHtNaXhlZH0gdGFyZ2V0XHJcblx0XHRcdCAqL1xyXG5cdFx0XHRuYXY6IGZ1bmN0aW9uKHRhcmdldCkge1xyXG5cdFx0XHRcdC8qKlxyXG5cdFx0XHRcdCAqIElmIG5hdmlnYXRpb24gd3JhcHBlciBhbHJlYWR5IGV4aXN0XHJcblx0XHRcdFx0ICogUmVtb3ZlIGl0LCBwcm90ZWN0aW9uIGJlZm9yZSBkb3VibGVkIG5hdmlnYXRpb25cclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHRpZiAoXy5uYXZXcmFwcGVyKSB7XHJcblx0XHRcdFx0XHRfLm5hdldyYXBwZXIucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFdoaWxlIHRhcmdldCBpc24ndCBzcGVjaWZlZCwgdXNlIHNsaWRlciB3cmFwcGVyXHJcblx0XHRcdFx0Xy5vcHRpb25zLm5hdiA9ICh0YXJnZXQpID8gdGFyZ2V0IDogXy5vcHRpb25zLm5hdjtcclxuXHRcdFx0XHQvLyBCdWlsZFxyXG5cdFx0XHRcdF8ubmF2aWdhdGlvbigpO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIEFwcGVuZCBhcnJvd3MgdG8gc3BlY2lmZXQgdGFyZ2V0XHJcblx0XHRcdCAqIEBwYXJhbSAge01peGVkfSB0YXJnZXRcclxuXHRcdFx0ICovXHJcblx0XHRcdGFycm93czogZnVuY3Rpb24odGFyZ2V0KSB7XHJcblx0XHRcdFx0LyoqXHJcblx0XHRcdFx0ICogSWYgYXJyb3dzIHdyYXBwZXIgYWxyZWFkeSBleGlzdFxyXG5cdFx0XHRcdCAqIFJlbW92ZSBpdCwgcHJvdGVjdGlvbiBiZWZvcmUgZG91YmxlZCBhcnJvd3NcclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHRpZiAoXy5hcnJvd3NXcmFwcGVyKSB7XHJcblx0XHRcdFx0XHRfLmFycm93c1dyYXBwZXIucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFdoaWxlIHRhcmdldCBpc24ndCBzcGVjaWZlZCwgdXNlIHNsaWRlciB3cmFwcGVyXHJcblx0XHRcdFx0Xy5vcHRpb25zLmFycm93cyA9ICh0YXJnZXQpID8gdGFyZ2V0IDogXy5vcHRpb25zLmFycm93cztcclxuXHRcdFx0XHQvLyBCdWlsZFxyXG5cdFx0XHRcdF8uYXJyb3dzKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9O1xyXG5cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEJ1aWxkaW5nIHNsaWRlciBET01cclxuXHQgKi9cclxuXHRHbGlkZS5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXM7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBcnJvd3NcclxuXHRcdCAqIElmIG9wdGlvbiBpcyB0cnVlIGFuZCB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHNsaWRlXHJcblx0XHQgKiBBcHBlbmQgbGVmdCBhbmQgcmlnaHQgYXJyb3dcclxuXHRcdCAqL1xyXG5cdFx0aWYgKF8ub3B0aW9ucy5hcnJvd3MpIF8uYXJyb3dzKCk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBOYXZpZ2F0aW9uXHJcblx0XHQgKiBJZiBvcHRpb24gaXMgdHJ1ZSBhbmQgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBzbGlkZVxyXG5cdFx0ICogQXBwZW5kIG5hdmlnYXRpb24gaXRlbSBmb3IgZWFjaCBzbGlkZVxyXG5cdFx0ICovXHJcblx0XHRpZiAoXy5vcHRpb25zLm5hdikgXy5uYXZpZ2F0aW9uKCk7XHJcblxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEJ1aWxkaW5nIG5hdmlnYXRpb24gRE9NXHJcblx0ICovXHJcblx0R2xpZGUucHJvdG90eXBlLm5hdmlnYXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKF8uc2xpZGVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0Ly8gU2V0dXAgdmFyaWFibGVzXHJcblx0XHRcdHZhciBvID0gXy5vcHRpb25zLFxyXG5cdFx0XHRcdC8qKlxyXG5cdFx0XHRcdCAqIFNldHRpbmcgYXBwZW5kIHRhcmdldFxyXG5cdFx0XHRcdCAqIElmIG9wdGlvbiBpcyB0cnVlIHNldCBkZWZhdWx0IHRhcmdldCwgdGhhdCBpcyBzbGlkZXIgd3JhcHBlclxyXG5cdFx0XHRcdCAqIEVsc2UgZ2V0IHRhcmdldCBzZXQgaW4gb3B0aW9uc1xyXG5cdFx0XHRcdCAqIEB0eXBlIHtCb29sIG9yIFN0cmluZ31cclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHR0YXJnZXQgPSAoXy5vcHRpb25zLm5hdiA9PT0gdHJ1ZSkgPyBfLnBhcmVudCA6IF8ub3B0aW9ucy5uYXY7XHJcblxyXG5cdFx0XHQvLyBOYXZpZ2F0aW9uIHdyYXBwZXJcclxuXHRcdFx0Xy5uYXZXcmFwcGVyID0gJCgnPGRpdiAvPicsIHtcclxuXHRcdFx0XHQnY2xhc3MnOiBvLm5hdkNsYXNzXHJcblx0XHRcdH0pLmFwcGVuZFRvKHRhcmdldCk7XHJcblxyXG5cdFx0XHQvLyBTZXR1cCB2YXJpYWJsZXNcclxuXHRcdFx0dmFyIG5hdiA9IF8ubmF2V3JhcHBlcixcclxuXHRcdFx0XHRpdGVtO1xyXG5cclxuXHRcdFx0Ly8gR2VuZXJhdGUgbmF2aWdhdGlvbiBpdGVtc1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IF8uc2xpZGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aXRlbSA9ICQoJzxhIC8+Jywge1xyXG5cdFx0XHRcdFx0J2hyZWYnOiAnIycsXHJcblx0XHRcdFx0XHQnY2xhc3MnOiBvLm5hdkl0ZW1DbGFzcyxcclxuXHRcdFx0XHRcdC8vIERpcmVjdGlvbiBhbmQgZGlzdGFuY2UgLT4gSXRlbSBpbmRleCBmb3J3YXJkXHJcblx0XHRcdFx0XHQnZGF0YS1kaXN0YW5jZSc6IGlcclxuXHRcdFx0XHR9KS5hcHBlbmRUbyhuYXYpO1xyXG5cclxuXHRcdFx0XHRuYXZbaSsxXSA9IGl0ZW07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldHVwIHZhcmlhYmxlc1xyXG5cdFx0XHR2YXIgbmF2Q2hpbGRyZW4gPSBuYXYuY2hpbGRyZW4oKTtcclxuXHJcblx0XHRcdC8vIEFkZCBuYXZDdXJyZW50SXRlbUNsYXNzIHRvIHRoZSBmaXJzdCBuYXZpZ2F0aW9uIGl0ZW1cclxuXHRcdFx0bmF2Q2hpbGRyZW4uZXEoMCkuYWRkQ2xhc3Moby5uYXZDdXJyZW50SXRlbUNsYXNzKTtcclxuXHJcblx0XHRcdC8vIElmIGNlbnRlcmVkIG9wdGlvbiBpcyB0cnVlXHJcblx0XHRcdGlmIChvLm5hdkNlbnRlcikge1xyXG5cdFx0XHRcdC8vIENlbnRlciBidWxsZXQgbmF2aWdhdGlvblxyXG5cdFx0XHRcdG5hdi5jc3Moe1xyXG5cdFx0XHRcdFx0J2xlZnQnOiAnNTAlJyxcclxuXHRcdFx0XHRcdCd3aWR0aCc6IG5hdkNoaWxkcmVuLm91dGVyV2lkdGgodHJ1ZSkgKiBuYXZDaGlsZHJlbi5sZW5ndGgsXHJcblx0XHRcdFx0XHQnbWFyZ2luLWxlZnQnOiAnLTYwcHgnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qKlxyXG5cdFx0XHQgKiBDb250cm9sbGVyXHJcblx0XHRcdCAqIE9uIGNsaWNrIGluIGFycm93cyBvciBuYXZpZ2F0aW9uLCBnZXQgZGlyZWN0aW9uIGFuZCBkaXN0YW5jZVxyXG5cdFx0XHQgKiBUaGVuIHNsaWRlIHNwZWNpZmllZCBkaXN0YW5jZVxyXG5cdFx0XHQgKi9cclxuXHRcdFx0bmF2Q2hpbGRyZW4ub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0Ly8gcHJldmVudCBub3JtYWwgYmVoYXZpb3VyXHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdC8vIFNsaWRlIGRpc3RhbmNlIHNwZWNpZmllZCBpbiBkYXRhIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdF8uc2xpZGUoICQodGhpcykuZGF0YSgnZGlzdGFuY2UnKSwgdHJ1ZSApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQnVpbGRpbmcgYXJyb3dzIERPTVxyXG5cdCAqL1xyXG5cdEdsaWRlLnByb3RvdHlwZS5hcnJvd3MgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKF8uc2xpZGVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0Ly8gU2V0dXAgdmFyaWFibGVzXHJcblx0XHRcdHZhciBvID0gXy5vcHRpb25zLFxyXG5cdFx0XHRcdC8qKlxyXG5cdFx0XHRcdCAqIFNldHRpbmcgYXBwZW5kIHRhcmdldFxyXG5cdFx0XHRcdCAqIElmIG9wdGlvbiBpcyB0cnVlIHNldCBkZWZhdWx0IHRhcmdldCwgdGhhdCBpcyBzbGlkZXIgd3JhcHBlclxyXG5cdFx0XHRcdCAqIEVsc2UgZ2V0IHRhcmdldCBzZXQgaW4gb3B0aW9uc1xyXG5cdFx0XHRcdCAqIEB0eXBlIHtCb29sIG9yIFN0cmluZ31cclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHR0YXJnZXQgPSAoXy5vcHRpb25zLmFycm93cyA9PT0gdHJ1ZSkgPyBfLnBhcmVudCA6IF8ub3B0aW9ucy5hcnJvd3M7XHJcblxyXG5cdFx0XHQvLyBBcnJvd3Mgd3JhcHBlclxyXG5cdFx0XHRfLmFycm93c1dyYXBwZXIgPSAkKCc8ZGl2IC8+Jywge1xyXG5cdFx0XHRcdCdjbGFzcyc6IG8uYXJyb3dzV3JhcHBlckNsYXNzXHJcblx0XHRcdH0pLmFwcGVuZFRvKHRhcmdldCk7XHJcblxyXG5cdFx0XHQvLyBTZXR1cCB2YXJpYWJsZXNcclxuXHRcdFx0dmFyIGFycm93cyA9IF8uYXJyb3dzV3JhcHBlcjtcclxuXHJcblx0XHRcdC8vIFJpZ2h0IGFycm93XHJcblx0XHRcdGFycm93cy5yaWdodCA9ICQoJzxhIC8+Jywge1xyXG5cdFx0XHRcdCdocmVmJzogJyMnLFxyXG5cdFx0XHRcdCdjbGFzcyc6IG8uYXJyb3dNYWluQ2xhc3MgKyAnICcgKyBvLmFycm93UmlnaHRDbGFzcyxcclxuXHRcdFx0XHQvLyBEaXJlY3Rpb24gYW5kIGRpc3RhbmNlIC0+IE9uZSBmb3J3YXJkXHJcblx0XHRcdFx0J2RhdGEtZGlzdGFuY2UnOiAnMScsXHJcblx0XHRcdFx0J2h0bWwnOiBvLmFycm93UmlnaHRUZXh0XHJcblx0XHRcdH0pLmFwcGVuZFRvKGFycm93cyk7XHJcblxyXG5cdFx0XHQvLyBMZWZ0IGFycm93XHJcblx0XHRcdGFycm93cy5sZWZ0ID0gJCgnPGEgLz4nLCB7XHJcblx0XHRcdFx0J2hyZWYnOiAnIycsXHJcblx0XHRcdFx0J2NsYXNzJzogby5hcnJvd01haW5DbGFzcyArICcgJyArIG8uYXJyb3dMZWZ0Q2xhc3MsXHJcblx0XHRcdFx0Ly8gRGlyZWN0aW9uIGFuZCBkaXN0YW5jZSAtPiBPbmUgYmFja3dhcmRcclxuXHRcdFx0XHQnZGF0YS1kaXN0YW5jZSc6ICctMScsXHJcblx0XHRcdFx0J2h0bWwnOiBvLmFycm93TGVmdFRleHRcclxuXHRcdFx0fSkuYXBwZW5kVG8oYXJyb3dzKTtcclxuXHJcblx0XHRcdC8qKlxyXG5cdFx0XHQgKiBDb250cm9sbGVyXHJcblx0XHRcdCAqIE9uIGNsaWNrIGluIGFycm93cyBvciBuYXZpZ2F0aW9uLCBnZXQgZGlyZWN0aW9uIGFuZCBkaXN0YW5jZVxyXG5cdFx0XHQgKiBUaGVuIHNsaWRlIHNwZWNpZmllZCBkaXN0YW5jZVxyXG5cdFx0XHQgKi9cclxuXHRcdFx0YXJyb3dzLmNoaWxkcmVuKCkub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0Ly8gcHJldmVudCBub3JtYWwgYmVoYXZpb3VyXHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdC8vIFNsaWRlIGRpc3RhbmNlIHNwZWNpZmllZCBpbiBkYXRhIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdF8uc2xpZGUoICQodGhpcykuZGF0YSgnZGlzdGFuY2UnKSwgZmFsc2UgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgY2hhbmdlICYgYW5pbWF0ZSBsb2dpY1xyXG5cdCAqIEBwYXJhbSAge2ludH0gZGlzdGFuY2VcclxuXHQgKiBAcGFyYW0gIHtib29sfSBqdW1wXHJcblx0ICogQHBhcmFtICB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcblx0ICovXHJcblx0R2xpZGUucHJvdG90eXBlLnNsaWRlID0gZnVuY3Rpb24oZGlzdGFuY2UsIGp1bXAsIGNhbGxiYWNrKSB7XHJcblxyXG5cdFx0Ly8gQ2FjaGUgdGhpc1xyXG5cdFx0dmFyIF8gPSB0aGlzO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU3RvcCBhdXRvcGxheVxyXG5cdFx0ICogQ2xlYXJpbmcgdGltZXJcclxuXHRcdCAqL1xyXG5cdFx0Xy5wYXVzZSgpO1xyXG5cclxuXHRcdC8vIENhbGxiYWNrcyBiZWZvcmUgc2xpZGUgY2hhbmdlXHJcblx0XHRfLm9wdGlvbnMuYmVmb3JlVHJhbnNpdGlvbi5jYWxsKF8pO1xyXG5cclxuXHRcdC8vIFNldHVwIHZhcmlhYmxlc1xyXG5cdFx0dmFyXHRjdXJyZW50U2xpZGUgPSAoanVtcCkgPyAwIDogXy5jdXJyZW50U2xpZGUsXHJcblx0XHRcdHNsaWRlc0xlbmd0aCA9IC0oXy5zbGlkZXMubGVuZ3RoLTEpLFxyXG5cdFx0XHRuYXZDdXJyZW50Q2xhc3MgPSBfLm9wdGlvbnMubmF2Q3VycmVudEl0ZW1DbGFzcyxcclxuXHRcdFx0c2xpZGVzU3ByZWFkID0gXy5zbGlkZXMuc3ByZWFkO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2hlY2sgaWYgY3VycmVudCBzbGlkZSBpcyBmaXJzdCBhbmQgZGlyZWN0aW9uIGlzIHByZXZpb3VzLCB0aGVuIGdvIHRvIGxhc3Qgc2xpZGVcclxuXHRcdCAqIG9yIGN1cnJlbnQgc2xpZGUgaXMgbGFzdCBhbmQgZGlyZWN0aW9uIGlzIG5leHQsIHRoZW4gZ28gdG8gdGhlIGZpcnN0IHNsaWRlXHJcblx0XHQgKiBlbHNlIGNoYW5nZSBjdXJyZW50IHNsaWRlIG5vcm1hbGx5XHJcblx0XHQgKi9cclxuXHRcdGlmICggY3VycmVudFNsaWRlID09PSAwICYmIGRpc3RhbmNlID09PSAtMSApIHtcclxuXHRcdFx0Y3VycmVudFNsaWRlID0gc2xpZGVzTGVuZ3RoO1xyXG5cdFx0fSBlbHNlIGlmICggY3VycmVudFNsaWRlID09PSBzbGlkZXNMZW5ndGggJiYgZGlzdGFuY2UgPT09IDEgKSB7XHJcblx0XHRcdGN1cnJlbnRTbGlkZSA9IDA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjdXJyZW50U2xpZGUgPSBjdXJyZW50U2xpZGUgKyAoLWRpc3RhbmNlKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIENyb3AgdG8gY3VycmVudCBzbGlkZS5cclxuXHRcdCAqIE11bCBzbGlkZSB3aWR0aCBieSBjdXJyZW50IHNsaWRlIG51bWJlci5cclxuXHRcdCAqL1xyXG5cdFx0dmFyIHRyYW5zbGF0ZSA9IHNsaWRlc1NwcmVhZCAqIGN1cnJlbnRTbGlkZSArICdweCc7XHJcblxyXG5cdFx0Ly8gV2hpbGUgQ1NTMyBpcyBzdXBwb3J0ZWRcclxuXHRcdGlmIChfLkNTUzNzdXBwb3J0KSB7XHJcblx0XHRcdC8vIENyb3BpbmcgYnkgaW5jcmVhc2luZy9kZWNyZWFzaW5nIHNsaWRlciB3cmFwcGVyIHRyYW5zbGF0ZVxyXG5cdFx0XHRfLndyYXBwZXIuY3NzKHtcclxuXHRcdFx0XHQnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoJyArIHRyYW5zbGF0ZSArICcsIDBweCwgMHB4KScsXHJcblx0XHRcdFx0ICAgJy1tb3otdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKCcgKyB0cmFuc2xhdGUgKyAnLCAwcHgsIDBweCknLFxyXG5cdFx0XHRcdCAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2xhdGUzZCgnICsgdHJhbnNsYXRlICsgJywgMHB4LCAwcHgpJyxcclxuXHRcdFx0XHQgICAgICctby10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoJyArIHRyYW5zbGF0ZSArICcsIDBweCwgMHB4KScsXHJcblx0XHRcdFx0ICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKCcgKyB0cmFuc2xhdGUgKyAnLCAwcHgsIDBweCknXHJcblx0XHRcdH0pO1xyXG5cdFx0Ly8gRWxzZSB1c2UgJC5hbmltYXRlKClcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIENyb3BpbmcgYnkgaW5jcmVhc2luZy9kZWNyZWFzaW5nIHNsaWRlciB3cmFwcGVyIG1hcmdpblxyXG5cdFx0XHRfLndyYXBwZXIuc3RvcCgpXHJcblx0XHRcdFx0LmFuaW1hdGUoeyAnbWFyZ2luLWxlZnQnOiB0cmFuc2xhdGUgfSwgXy5vcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0byBuYXZpZ2F0aW9uIGl0ZW0gY3VycmVudCBjbGFzc1xyXG5cdFx0aWYgKF8ub3B0aW9ucy5uYXYgJiYgXy5uYXZXcmFwcGVyKSB7XHJcblx0XHRcdF8ubmF2V3JhcHBlci5jaGlsZHJlbigpXHJcblx0XHRcdFx0LmVxKC1jdXJyZW50U2xpZGUpXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MobmF2Q3VycmVudENsYXNzKVxyXG5cdFx0XHRcdFx0XHQuc2libGluZ3MoKVxyXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhuYXZDdXJyZW50Q2xhc3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVwZGF0ZSBjdXJyZW50IHNsaWRlIGdsb2JhbHlcclxuXHRcdF8uY3VycmVudFNsaWRlID0gY3VycmVudFNsaWRlO1xyXG5cclxuXHRcdC8vIENhbGxiYWNrcyBhZnRlciBzbGlkZSBjaGFuZ2VcclxuXHRcdF8ub3B0aW9ucy5hZnRlclRyYW5zaXRpb24uY2FsbChfKTtcclxuXHRcdGlmICggKGNhbGxiYWNrICE9PSAndW5kZWZpbmVkJykgJiYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgKSBjYWxsYmFjaygpO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU3RhcnQgYXV0b3BsYXlcclxuXHRcdCAqIEFmdGVyIHNsaWRlXHJcblx0XHQgKi9cclxuXHRcdF8ucGxheSgpO1xyXG5cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBBdXRvcGxheSBsb2dpY1xyXG5cdCAqIFNldHVwIGNvdW50aW5nXHJcblx0ICovXHJcblx0R2xpZGUucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXM7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBJZiBhdXRvcGxheSB0dXJuIG9uXHJcblx0XHQgKiBTbGlkZSBvbmUgZm9yd2FyZCBhZnRlciBhIHNldCB0aW1lXHJcblx0XHQgKi9cclxuXHRcdGlmIChfLm9wdGlvbnMuYXV0b3BsYXkpIHtcclxuXHRcdFx0Xy5hdXRvID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Xy5zbGlkZSgxLCBmYWxzZSk7XHJcblx0XHRcdH0sIF8ub3B0aW9ucy5hdXRvcGxheSk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEF1dG9wbGF5IHBhdXNlXHJcblx0ICogQ2xlYXIgY291bnRpbmdcclxuXHQgKi9cclxuXHRHbGlkZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXM7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBJZiBhdXRvcGxheSB0dXJuIG9uXHJcblx0XHQgKiBDbGVhciBpbnRlcmlhbFxyXG5cdFx0ICovXHJcblx0XHRpZiAoXy5vcHRpb25zLmF1dG9wbGF5KSB7XHJcblx0XHRcdF8uYXV0byA9IGNsZWFySW50ZXJ2YWwoXy5hdXRvKTtcclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlIHNpbGRlcyBvbiBzd2lwZSBldmVudFxyXG5cdCAqL1xyXG5cdEdsaWRlLnByb3RvdHlwZS5zd2lwZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdC8vIFNldHVwIHZhcmlhYmxlc1xyXG5cdFx0dmFyIF8gPSB0aGlzLFxyXG5cdFx0XHR0b3VjaCxcclxuXHRcdFx0dG91Y2hEaXN0YW5jZSxcclxuXHRcdFx0dG91Y2hTdGFydFgsXHJcblx0XHRcdHRvdWNoU3RhcnRZLFxyXG5cdFx0XHR0b3VjaEVuZFgsXHJcblx0XHRcdHRvdWNoRW5kWSxcclxuXHRcdFx0dG91Y2hIeXBvdGVudXNlLFxyXG5cdFx0XHR0b3VjaENhdGhldHVzLFxyXG5cdFx0XHR0b3VjaFNpbixcclxuXHRcdFx0TWF0aFBJID0gMTgwIC8gTWF0aC5QSSxcclxuXHRcdFx0c3ViRXhTeCxcclxuXHRcdFx0c3ViRXlTeSxcclxuXHRcdFx0cG93RVgsXHJcblx0XHRcdHBvd0VZO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVG91Y2ggc3RhcnRcclxuXHRcdCAqIEBwYXJhbSAge09iamVjdH0gZSBldmVudFxyXG5cdFx0ICovXHJcblx0XHRfLnBhcmVudC5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0Ly8gQ2FjaGUgZXZlbnRcclxuXHRcdFx0dG91Y2ggPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSB8fCBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XHJcblxyXG5cdFx0XHQvLyBHZXQgdG91Y2ggc3RhcnQgcG9pbnRzXHJcblx0XHRcdHRvdWNoU3RhcnRYID0gdG91Y2gucGFnZVg7XHJcblx0XHRcdHRvdWNoU3RhcnRZID0gdG91Y2gucGFnZVk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFRvdWNoIG1vdmVcclxuXHRcdCAqIEZyb20gc3dpcGUgbGVuZ3RoIHNlZ21lbnRzIGNhbGN1bGF0ZSBzd2lwZSBhbmdsZVxyXG5cdFx0ICogQHBhcmFtICB7T2JlamN0fSBlIGV2ZW50XHJcblx0XHQgKi9cclxuXHRcdF8ucGFyZW50Lm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdC8vIENhY2hlIGV2ZW50XHJcblx0XHRcdHRvdWNoID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gfHwgZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG5cclxuXHRcdFx0Ly8gR2V0IHRvdWNoIGVuZCBwb2ludHNcclxuXHRcdFx0dG91Y2hFbmRYID0gdG91Y2gucGFnZVg7XHJcblx0XHRcdHRvdWNoRW5kWSA9IHRvdWNoLnBhZ2VZO1xyXG5cclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHN0YXJ0LCBlbmQgcG9pbnRzXHJcblx0XHRcdHN1YkV4U3ggPSB0b3VjaEVuZFggLSB0b3VjaFN0YXJ0WDtcclxuXHRcdFx0c3ViRXlTeSA9IHRvdWNoRW5kWSAtIHRvdWNoU3RhcnRZO1xyXG5cdFx0XHQvLyBCaXR3aXNlIHN1YkV4U3ggcG93XHJcblx0XHRcdHBvd0VYID0gTWF0aC5hYnMoIHN1YkV4U3ggPDwgMiApO1xyXG5cdFx0XHQvLyBCaXR3aXNlIHN1YkV5U3kgcG93XHJcblx0XHRcdHBvd0VZID0gTWF0aC5hYnMoIHN1YkV5U3kgPDwgMiApO1xyXG5cclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHRoZSBsZW5ndGggb2YgdGhlIGh5cG90ZW51c2Ugc2VnbWVudFxyXG5cdFx0XHR0b3VjaEh5cG90ZW51c2UgPSBNYXRoLnNxcnQoIHBvd0VYICsgcG93RVkgKTtcclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHRoZSBsZW5ndGggb2YgdGhlIGNhdGhldHVzIHNlZ21lbnRcclxuXHRcdFx0dG91Y2hDYXRoZXR1cyA9IE1hdGguc3FydCggcG93RVkgKTtcclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHRoZSBzaW5lIG9mIHRoZSBhbmdsZVxyXG5cdFx0XHR0b3VjaFNpbiA9IE1hdGguYXNpbiggdG91Y2hDYXRoZXR1cy90b3VjaEh5cG90ZW51c2UgKTtcclxuXHJcblx0XHRcdC8vIFdoaWxlIHRvdWNoIGFuZ2xlIGlzIGxvd2VyIHRoYW4gMzIgZGVncmVlcywgYmxvY2sgdmVydGljYWwgc2Nyb2xsXHJcblx0XHRcdGlmKCAodG91Y2hTaW4gKiBNYXRoUEkpIDwgMzIgKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFRvdWNoIGVuZFxyXG5cdFx0ICogQHBhcmFtICB7T2JqZWN0fSBlIGV2ZW50XHJcblx0XHQgKi9cclxuXHRcdF8ucGFyZW50Lm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0Ly8gQ2FjaGUgZXZlbnRcclxuXHRcdFx0dG91Y2ggPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSB8fCBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgdG91Y2ggZGlzdGFuY2VcclxuXHRcdFx0dG91Y2hEaXN0YW5jZSA9IHRvdWNoLnBhZ2VYIC0gdG91Y2hTdGFydFg7XHJcblxyXG5cdFx0XHQvLyBXaGlsZSB0b3VjaCBpcyBwb3NpdGl2ZSBhbmQgZ3JlYXRlciB0aGFuIGRpc3RhbmNlIHNldCBpbiBvcHRpb25zXHJcblx0XHRcdGlmICggdG91Y2hEaXN0YW5jZSA+IF8ub3B0aW9ucy50b3VjaERpc3RhbmNlICkge1xyXG5cdFx0XHRcdC8vIFNsaWRlIG9uZSBiYWNrd2FyZFxyXG5cdFx0XHRcdF8uc2xpZGUoLTEpO1xyXG5cdFx0XHQvLyBXaGlsZSB0b3VjaCBpcyBuZWdhdGl2ZSBhbmQgbG93ZXIgdGhhbiBuZWdhdGl2ZSBkaXN0YW5jZSBzZXQgaW4gb3B0aW9uc1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB0b3VjaERpc3RhbmNlIDwgLV8ub3B0aW9ucy50b3VjaERpc3RhbmNlKSB7XHJcblx0XHRcdFx0Ly8gU2xpZGUgb25lIGZvcndhcmRcclxuXHRcdFx0XHRfLnNsaWRlKDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGl6ZVxyXG5cdCAqIEdldCAmIHNldCBkaW1lbnNpb25zXHJcblx0ICogU2V0IGFuaW1hdGlvbiB0eXBlXHJcblx0ICovXHJcblx0R2xpZGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBDYWNoZSB0aGlzXHJcblx0XHR2YXIgXyA9IHRoaXMsXHJcblx0XHRcdC8vIEdldCBzaWRlYmFyIHdpZHRoXHJcblx0XHRcdHNsaWRlcldpZHRoID0gXy5wYXJlbnQud2lkdGgoKTtcclxuXHRcdFx0Ly8gR2V0IHNsaWRlIHdpZHRoXHJcblx0XHRcdF8uc2xpZGVzLnNwcmVhZCA9IHNsaWRlcldpZHRoO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHdyYXBwZXIgd2lkdGhcclxuXHRcdFx0Xy53cmFwcGVyLndpZHRoKHNsaWRlcldpZHRoICogXy5zbGlkZXMubGVuZ3RoKTtcclxuXHRcdFx0Ly8gU2V0IHNsaWRlIHdpZHRoXHJcblx0XHRcdF8uc2xpZGVzLndpZHRoKF8uc2xpZGVzLnNwcmVhZCk7XHJcblxyXG5cdFx0Ly8gSWYgQ1NTMyBUcmFuc2l0aW9uIGlzbid0IHN1cHBvcnRlZCBzd2l0Y2ggQ1NTM3N1cHBvcnQgdmFyaWFibGUgdG8gZmFsc2UgYW5kIHVzZSAkLmFuaW1hdGUoKVxyXG5cdFx0aWYgKCAhaXNDc3NTdXBwb3J0ZWQoXCJ0cmFuc2l0aW9uXCIpIHx8ICFpc0Nzc1N1cHBvcnRlZChcInRyYW5zZm9ybVwiKSApIF8uQ1NTM3N1cHBvcnQgPSBmYWxzZTtcclxuXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRnVuY3Rpb24gdG8gY2hlY2sgY3NzMyBzdXBwb3J0XHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSAgZGVjbGFyYXRpb24gbmFtZVxyXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaXNDc3NTdXBwb3J0ZWQoZGVjbGFyYXRpb24pIHtcclxuXHJcblx0XHR2YXIgaXNTdXBwb3J0ZWQgPSBmYWxzZSxcclxuXHRcdFx0cHJlZml4ZXMgPSAnS2h0bWwgbXMgTyBNb3ogV2Via2l0Jy5zcGxpdCgnICcpLFxyXG5cdFx0XHRjbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG5cdFx0XHRkZWNsYXJhdGlvbkNhcGl0YWwgPSBudWxsO1xyXG5cclxuXHRcdGRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24udG9Mb3dlckNhc2UoKTtcclxuXHRcdGlmIChjbG9uZS5zdHlsZVtkZWNsYXJhdGlvbl0gIT09IHVuZGVmaW5lZCkgaXNTdXBwb3J0ZWQgPSB0cnVlO1xyXG5cdFx0aWYgKGlzU3VwcG9ydGVkID09PSBmYWxzZSkge1xyXG5cdFx0XHRkZWNsYXJhdGlvbkNhcGl0YWwgPSBkZWNsYXJhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRlY2xhcmF0aW9uLnN1YnN0cigxKTtcclxuXHRcdFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRpZiggY2xvbmUuc3R5bGVbcHJlZml4ZXNbaV0gKyBkZWNsYXJhdGlvbkNhcGl0YWwgXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0aXNTdXBwb3J0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHdpbmRvdy5vcGVyYSkge1xyXG5cdFx0XHRpZiAod2luZG93Lm9wZXJhLnZlcnNpb24oKSA8IDEzKSBpc1N1cHBvcnRlZCA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRyZXR1cm4gaXNTdXBwb3J0ZWQ7XHJcblxyXG5cdH1cclxuXHJcblx0JC5mbltuYW1lXSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0aWYgKCAhJC5kYXRhKHRoaXMsICdhcGlfJyArIG5hbWUpICkge1xyXG5cdFx0XHRcdCQuZGF0YSh0aGlzLCAnYXBpXycgKyBuYW1lLFxyXG5cdFx0XHRcdFx0bmV3IEdsaWRlKCQodGhpcyksIG9wdGlvbnMpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdH07XHJcblxyXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iXX0=
